<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <base href="/HHLC-user-study/">
    <link rel="stylesheet" href="styles.css">
    <title>HHLC User Study - Demographics</title>
</head>

<body>
    <div class="container">
        <div class="start-container">
            <h1 style="margin-bottom: 25px;">Demographic Information</h1>

            <div class="rad" style="line-height: 1.6;">
                <!-- Age -->
                <p style="margin-bottom: 8px;">What is your age? <span style="color: red;">*</span></p>
                <select id="age-dropdown" required style="margin-bottom: 20px;">
                    <option value="">Choose...</option>
                </select>

                <!-- Profession -->
                <p style="margin-bottom: 8px;">What is your current profession? (Choose Other at the bottom if your profession is not in the list.) <span style="color: red;">*</span></p>
                <select id="profession-dropdown" name="profession" required style="margin-bottom: 10px;">
                    <option value="">Choose...</option>
                    <option value="Accounting">Accounting</option>
                    <option value="Academic / Research">Academic / Research</option>
                    <option value="Administrative / Clerical">Administrative / Clerical</option>
                    <option value="Advertising / Public Relations">Advertising / Public Relations</option>
                    <option value="Agriculture / Forestry">Agriculture / Forestry</option>
                    <option value="Architecture">Architecture</option>
                    <option value="Arts & Design">Arts & Design</option>
                    <option value="Bioinformatics">Bioinformatics</option>
                    <option value="Biology / Life Sciences">Biology / Life Sciences</option>
                    <option value="Business Management">Business Management</option>
                    <option value="Civil Engineering">Civil Engineering</option>
                    <option value="Computer Science / Software Development">Computer Science / Software Development</option>
                    <option value="Construction / Trades">Construction / Trades</option>
                    <option value="Customer Service">Customer Service</option>
                    <option value="Cybersecurity">Cybersecurity</option>
                    <option value="Data Science / Analytics">Data Science / Analytics</option>
                    <option value="Dentistry">Dentistry</option>
                    <option value="Education – Primary / Secondary">Education – Primary / Secondary</option>
                    <option value="Education – Higher Education / University">Education – Higher Education / University</option>
                    <option value="Electrical Engineering">Electrical Engineering</option>
                    <option value="Environmental Science">Environmental Science</option>
                    <option value="Finance / Banking">Finance / Banking</option>
                    <option value="Geography / GIS">Geography / GIS</option>
                    <option value="Graphic Design">Graphic Design</option>
                    <option value="Healthcare – Nursing">Healthcare – Nursing</option>
                    <option value="Healthcare – Physician / Specialist">Healthcare – Physician / Specialist</option>
                    <option value="Healthcare">Healthcare (General)</option>
                    <option value="Hospitality / Tourism">Hospitality / Tourism</option>
                    <option value="Human Resources">Human Resources</option>
                    <option value="Industrial Engineering">Industrial Engineering</option>
                    <option value="Information Technology (IT Support, Admin)">Information Technology (IT Support, Admin)</option>
                    <option value="Journalism / Media">Journalism / Media</option>
                    <option value="Law / Legal Services">Law / Legal Services</option>
                    <option value="Logistics / Supply Chain">Logistics / Supply Chain</option>
                    <option value="Marketing / Communications">Marketing / Communications</option>
                    <option value="Mathematics / Statistics">Mathematics / Statistics</option>
                    <option value="Mechanical Engineering">Mechanical Engineering</option>
                    <option value="Military / Defense">Military / Defense</option>
                    <option value="Non-Profit / NGO Sector">Non-Profit / NGO Sector</option>
                    <option value="Pharmacology / Pharmacy">Pharmacology / Pharmacy</option>
                    <option value="Physics / Physical Sciences">Physics / Physical Sciences</option>
                    <option value="Policy / Public Administration">Policy / Public Administration</option>
                    <option value="Psychology">Psychology</option>
                    <option value="Quality Assurance / Testing">Quality Assurance / Testing</option>
                    <option value="Research – Social Sciences">Research – Social Sciences</option>
                    <option value="Research – STEM">Research – STEM</option>
                    <option value="Retail / Sales">Retail / Sales</option>
                    <option value="Scientific Research">Scientific Research</option>
                    <option value="Social Work">Social Work</option>
                    <option value="Software Engineering">Software Engineering</option>
                    <option value="Student">Student</option>
                    <option value="Tech / Engineering">Tech / Engineering (General)</option>
                    <option value="Transportation / Aviation">Transportation / Aviation</option>
                    <option value="Urban Planning">Urban Planning</option>
                    <option value="UX / UI / Product Design">UX / UI / Product Design</option>
                    <option value="Veterinary Medicine">Veterinary Medicine</option>
                    <option value="Visual Data Communication">Visual Data Communication</option>
                    <option value="Other">Other (please specify)</option>
                </select>

                <!-- Other Profession -->
                <div id="other-profession-container" style="display: none; margin-top: 10px; margin-bottom: 20px;">
                    <label for="other-profession">Please specify: <span style="color: red;">*</span></label><br>
                    <input style="padding: 8px; margin-top: 5px; width: 300px;" type="text" id="other-profession" name="other-profession"
                        placeholder="Enter your profession">
                </div>

                <!-- Education -->
                <p style="margin-bottom: 12px; margin-top: 20px;">What is the highest level of education you have completed? <span style="color: red;">*</span></p>
                <div class="checkbox-options" style="margin-bottom: 25px;">
                    <label><input type="radio" name="education" value="High school diploma or lower" required> High school diploma or lower</label>
                    <label><input type="radio" name="education" value="Associate degree"> Associate degree</label>
                    <label><input type="radio" name="education" value="Bachelor's degree"> Bachelor's degree</label>
                    <label><input type="radio" name="education" value="Master's degree"> Master's degree</label>
                    <label><input type="radio" name="education" value="Doctoral degree"> Doctoral degree</label>
                </div>

                <!-- Visualization Experience
                <p style="margin-bottom: 8px;">How familiar are you with interpreting graphs and data visualizations? <span style="color: red;">*</span></p>
                <p style="font-size: 14px; color: #666; margin-top: 5px; margin-bottom: 12px;">(1 = Not familiar at all, 5 = Extremely familiar)</p>
                <div class="checkbox-options" style="margin-bottom: 25px;">
                    <label><input type="radio" name="visualization" value="1" required> 1 - Not familiar at all</label>
                    <label><input type="radio" name="visualization" value="2"> 2 - Slightly familiar</label>
                    <label><input type="radio" name="visualization" value="3"> 3 - Moderately familiar</label>
                    <label><input type="radio" name="visualization" value="4"> 4 - Very familiar</label>
                    <label><input type="radio" name="visualization" value="5"> 5 - Extremely familiar</label>
                </div> -->

                <!-- Data Visualization Background -->
                <p style="margin-bottom: 12px;">How would you describe your background or experience with data visualizations? <span style="color: red;">*</span></p>
                <div class="radio-options" style="margin-bottom: 25px;">
                    <label for="no-exposure" style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" id="no-exposure" name="data-viz-background" value="no-exposure" required style="margin-right: 8px; margin-top: 2px;">
                        <span>No formal exposure (You've had little to no experience with data visualization beyond basic graphs you might encounter in everyday media.)</span>
                    </label>

                    <label for="moderate-exposure" style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" id="moderate-exposure" name="data-viz-background" value="moderate-exposure" style="margin-right: 8px; margin-top: 2px;">
                        <span>Moderate exposure (You've occasionally encountered data visualizations and feel comfortable interpreting basic charts and graphs.)</span>
                    </label>

                    <label for="basic-training" style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" id="basic-training" name="data-viz-background" value="basic-training" style="margin-right: 8px; margin-top: 2px;">
                        <span>Trained in basic data visualization (You've received some formal or informal training in reading, interpreting, or creating data visualizations.)</span>
                    </label>

                    <label for="frequent-user" style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" id="frequent-user" name="data-viz-background" value="frequent-user" style="margin-right: 8px; margin-top: 2px;">
                        <span>Frequent user of visual data (You regularly work with or encounter data visualizations in your professional or academic work.)</span>
                    </label>

                    <label for="expert" style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" id="expert" name="data-viz-background" value="expert" style="margin-right: 8px; margin-top: 2px;">
                        <span>Expert / Professional visualization designer or analyst (You have advanced knowledge and experience in designing, creating, or analyzing data visualizations professionally.)</span>
                    </label>
                </div>
              <!-- Visual Impairments -->
                <p>Do you have any visual impairments or color vision deficiencies that affect how you view charts or graphics? <span style="color: red;">*</span></p>
                <div class="radio-options">
                    <label style="display: flex; align-items: center; margin-bottom: 8px;">
                        <input type="radio" name="visualImpairment" value="No" required style="margin-right: 8px;">
                        <span>No</span>
                    </label>
                    <label style="display: flex; align-items: center; margin-bottom: 8px;">
                        <input type="radio" name="visualImpairment" value="Yes - Color vision deficiency" style="margin-right: 8px;">
                        <span>Yes</span>
                    </label>
                </div>
                <!-- Media Visualization Exposure -->
                <p>How frequently do you encounter data visualizations (charts, graphs, maps) in media sources? <span style="color: red;">*</span></p>
                <p style="font-size: 14px; color: #666; margin-bottom: 15px;">Think about newspapers, magazines, online articles, social media, TV news, reports, etc.</p>
                <div class="radio-options">
                    <label style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" name="mediaVisualizationExposure" value="Never or rarely" required style="margin-right: 8px; margin-top: 2px;">
                        <span>Never or rarely (I rarely encounter data visualizations in news, social media, or other media.)</span>
                    </label>
                    
                    <label style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" name="mediaVisualizationExposure" value="Occasionally" style="margin-right: 8px; margin-top: 2px;">
                        <span>Occasionally (I see visualizations a few times per month in news, articles, or social media.)</span>
                    </label>
                    
                    <label style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" name="mediaVisualizationExposure" value="Regularly" style="margin-right: 8px; margin-top: 2px;">
                        <span>Regularly (I encounter visualizations several times per week in the media I consume.)</span>
                    </label>
                    
                    <label style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" name="mediaVisualizationExposure" value="Frequently" style="margin-right: 8px; margin-top: 2px;">
                        <span>Frequently (I see data visualizations almost daily in newspapers, online articles, reports, or social media.)</span>
                    </label>
                    
                    <label style="display: flex; align-items: flex-start; margin-bottom: 8px;">
                        <input type="radio" name="mediaVisualizationExposure" value="Very frequently" style="margin-right: 8px; margin-top: 2px;">
                        <span>Very frequently (I actively seek out and regularly consume media rich in data visualizations such as data journalism, research reports, etc.)</span>
                    </label>
                </div>
                <br>

                            <!-- Helpfulness of Media Visualizations -->
                <p>When reading media sources, how helpful do you find visualizations (charts, graphs, maps) that are part of a story? <span style="color: red;">*</span></p>
                <p style="font-size: 14px; color: #666; margin-top: 5px;">(1 = Not helpful, 5 = Very helpful)</p>
                <div class="familiarity-slider-container" style="max-width:360px; margin-bottom:16px;">
                    <div class="slider-group">
                        <input type="range" id="mediaVisualizationHelpfulness" name="mediaVisualizationHelpfulness" min="1" max="5" value="3" class="familiarity-slider" required oninput="updateSliderValue('mediaVisualizationHelpfulness', this.value)">
                        <span class="slider-value" id="mediaVisualizationHelpfulness-value">3</span>
                    </div>
                    <div class="slider-labels">
                        <span>1</span>
                        <span>2</span>
                        <span>3</span>
                        <span>4</span>
                        <span>5</span>
                    </div>
                </div>

                <!-- Specific Chart Type Familiarity -->
                <p>Please rate your familiarity with each type of visualization:</p>
                <p style="font-size: 14px; color: #666; margin-bottom: 20px;">(1 = Not familiar at all, 5 = Extremely familiar)</p>
                
                <!-- Bar Charts -->
                <div class="chart-familiarity">
                    <p>Bar Charts <span style="color: red;">*</span></p>
                    <div class="familiarity-slider-container">
                        <div class="slider-group">
                            <input type="range" id="barCharts" name="barCharts" min="1" max="5" value="3" class="familiarity-slider" required oninput="updateSliderValue('barCharts', this.value)">
                            <span class="slider-value" id="barCharts-value">3</span>
                        </div>
                        <div class="slider-labels">
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                        </div>
                    </div>
                </div>

                <!-- Line Charts -->
                <div class="chart-familiarity">
                    <p>Line Charts <span style="color: red;">*</span></p>
                    <div class="familiarity-slider-container">
                        <div class="slider-group">
                            <input type="range" id="lineCharts" name="lineCharts" min="1" max="5" value="3" class="familiarity-slider" required oninput="updateSliderValue('lineCharts', this.value)">
                            <span class="slider-value" id="lineCharts-value">3</span>
                        </div>
                        <div class="slider-labels">
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                        </div>
                    </div>
                </div>

                <!-- Scatterplots -->
                <div class="chart-familiarity">
                    <p>Scatterplots <span style="color: red;">*</span></p>
                    <div class="familiarity-slider-container">
                        <div class="slider-group">
                            <input type="range" id="scatterplots" name="scatterplots" min="1" max="5" value="3" class="familiarity-slider" required oninput="updateSliderValue('scatterplots', this.value)">
                            <span class="slider-value" id="scatterplots-value">3</span>
                        </div>
                        <div class="slider-labels">
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                        </div>
                    </div>
                </div>

                <!-- Geographical Maps -->
                <div class="chart-familiarity">
                    <p>Geographical Maps <span style="color: red;">*</span></p>
                    <div class="familiarity-slider-container">
                        <div class="slider-group">
                            <input type="range" id="geographicalMaps" name="geographicalMaps" min="1" max="5" value="3" class="familiarity-slider" required oninput="updateSliderValue('geographicalMaps', this.value)">
                            <span class="slider-value" id="geographicalMaps-value">3</span>
                        </div>
                        <div class="slider-labels">
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                        </div>
                    </div>
                </div>
                <br>
            </div>

            <!-- Next Button -->
                  <button type="button" class="start-btn">Continue Experiment</button>
        </div>
    </div>

    <script>
        // Populate age dropdown
        const ageDropdown = document.getElementById("age-dropdown");
        for (let age = 18; age <= 65; age++) {
            const option = document.createElement("option");
            option.value = age;
            option.textContent = age;
            ageDropdown.appendChild(option);
        }

        // Show/hide "Other" profession field
        const professionDropdown = document.getElementById('profession-dropdown');
        const otherContainer = document.getElementById('other-profession-container');
        const otherInput = document.getElementById('other-profession');

        professionDropdown.addEventListener('change', function () {
            if (this.value === 'Other') {
                otherContainer.style.display = 'block';
            } else {
                otherContainer.style.display = 'none';
                otherInput.value = '';
                otherInput.classList.remove("shake");
            }
        });

        // Update slider value display
        function updateSliderValue(sliderId, value) {
            const valueElement = document.getElementById(sliderId + '-value');
            if (valueElement) {
                valueElement.textContent = value;
            }
        }

        // Form validation and shake on error
        document.querySelector(".start-btn").addEventListener("click", async function (e) {
            e.preventDefault(); // prevent default button behavior
            
            // Get existing participant data from localStorage
            const participantSession = JSON.parse(localStorage.getItem("participantData") || "{}");
            if (!participantSession.participantId) {
                alert('No participant session found. Please restart the study.');
                window.location.href = 'index.html';
                return;
            }

            const requiredFields = [
                document.getElementById("age-dropdown"),
                document.querySelector('input[name="education"]:checked'),
                document.getElementById("profession-dropdown"),
                document.querySelector('input[name="data-viz-background"]:checked'),
                document.querySelector('input[name="mediaVisualizationExposure"]:checked'),
                document.querySelector('input[name="visualImpairment"]:checked'),
                document.getElementById("mediaVisualizationHelpfulness"),
                document.getElementById("barCharts"),
                document.getElementById("lineCharts"),
                document.getElementById("scatterplots"),
                document.getElementById("geographicalMaps")
            ];

            let valid = true;
            let firstInvalidField = null;

            requiredFields.forEach(field => {
                if (field === null || (field.tagName === 'SELECT' && field.value === '')) {
                    valid = false;
                    if (field && field.classList) {
                        field.classList.add("shake");
                        setTimeout(() => field.classList.remove("shake"), 400);
                        if (!firstInvalidField) firstInvalidField = field;
                    }
                }
            });

            if (professionDropdown.value === "Other" && otherInput.value.trim() === "") {
                valid = false;
                otherInput.classList.add("shake");
                setTimeout(() => otherInput.classList.remove("shake"), 400);
                if (!firstInvalidField) firstInvalidField = otherInput;
            }

            if (!valid) {
                alert("Please fill in all required fields (marked with *)");
                if (firstInvalidField) firstInvalidField.focus();
                return;
            }

            // Build the demographic object
            const demographicData = {
                age: document.getElementById("age-dropdown").value,
                education: document.querySelector('input[name="education"]:checked').value,
                profession: professionDropdown.value === "Other" ? otherInput.value.trim() : professionDropdown.value,
                dataVizBackground: document.querySelector('input[name="data-viz-background"]:checked').value,
                mediaVisualizationExposure: document.querySelector('input[name="mediaVisualizationExposure"]:checked').value,
                visualImpairment: document.querySelector('input[name="visualImpairment"]:checked').value,
                mediaVisualizationHelpfulness: document.getElementById("mediaVisualizationHelpfulness").value,
                chartFamiliarity: {
                    barCharts: document.getElementById("barCharts").value,
                    lineCharts: document.getElementById("lineCharts").value,
                    scatterplots: document.getElementById("scatterplots").value,
                    geographicalMaps: document.getElementById("geographicalMaps").value
                }
            };

            // Save to localStorage with session context
            const existingData = JSON.parse(localStorage.getItem("participantData") || "{}");
            const participantData = {
                ...existingData,
                demographic: demographicData
            };
            
            localStorage.setItem("participantData", JSON.stringify(participantData));

            // Redirect to VL Test
            window.location.href = 'vlTest.html';
        });
    </script>
</body>

</html>